/* =========================================
   TOKENS (Shared)
   - Kompatibel: --brand dan --brand-color
   ========================================= */
:root{
  /* Transitions */
  --t-base: .35s;
  --t-slow: .60s;
  --ease-smooth: cubic-bezier(0.25, 1, 0.3, 1); /* super smooth */
  
  /* Size & layout */
  --rail-w: 76px;
  --rail-w-expanded: 248px;
  --radius: 16px;
  --gap: 10px;
  --pad: 10px 12px;
  --indicator-w: 4px;
  --icon-nudge-y: -.5px;
  --icon-size: 18px;
  --btn-square: 40px;
  --logo-size: 42px;

  /* Brand (alias) */
  --brand: #0d6efd;
  --brand-color: var(--brand);

  /* Colors (light) */
  --bg-app: #f5f7fb;
  --bg-surface: #ffffffcc;   /* semi-transparan agar glass-lite */
  --bg-elev: #ffffffee;
  --bd-subtle: rgba(0,0,0,.08);
  --txt: #222831;
  --txt-muted: #667085;
  --hover: rgba(13,110,253,.08);

  /* Shadows */
  --shadow-rail: 0 12px 28px rgba(13,16,23,.08);
  --shadow-card: 0 10px 28px rgba(13,16,23,.08);

  /* Charts */
  --chart-grid: rgba(0,0,0,.12);
  --chart-txt: #2b2f36;
  --chart-bg: #ffffff;

  /* Soft buttons */
  --soft-primary: color-mix(in oklab, var(--brand-color) 16%, transparent);
  --soft-danger:  color-mix(in oklab, #dc3545 18%, transparent);
  --soft-secondary: color-mix(in oklab, #6c757d 16%, transparent);

  /* Gradients & ring */
  --grad: linear-gradient(135deg, rgba(13,110,253,.12), rgba(32,201,151,.10));
  --ring: 0 0 0 .22rem color-mix(in oklab, var(--brand) 30%, transparent);
}

[data-bs-theme="dark"]{
  --bg-app: #0b0d11;
  --bg-surface: #0f131bcc;
  --bg-elev: #121827ee;
  --bd-subtle: rgba(255,255,255,.08);
  --txt: #e7ecf4;
  --txt-muted: #9aa4b2;
  --hover: rgba(13,110,253,.16);

  --shadow-rail: 0 12px 28px rgba(0,0,0,.45);
  --shadow-card: 0 12px 28px rgba(0,0,0,.45);

  --chart-grid: rgba(255,255,255,.14);
  --chart-txt: #e7ecf4;
  --chart-bg: #0f131b;
}

/* =========================================
   GLOBAL
   ========================================= */
html, body { height: 100%; }
body{
  color: var(--txt);
  background:
    radial-gradient(1200px 600px at -10% -10%, rgba(13,110,253,.06), transparent 60%),
    radial-gradient(1000px 500px at 110% -20%, rgba(32,201,151,.06), transparent 60%),
    var(--bg-app);
}

/* =========================================
   SIDEBAR / RAIL
   ========================================= */
.rail{
  position: fixed; inset: 0 auto 0 0;
  display: none; flex-direction: column; gap: var(--gap);
  width: var(--rail-w);
  background: var(--bg-surface);
  border-inline-end: 1px solid var(--bd-subtle);
  padding: 12px 10px;
  box-shadow: var(--shadow-rail);
  z-index: 1030;
  transition: width .18s ease;
  backdrop-filter: saturate(120%) blur(8px);
}
@media (min-width: 992px){ .rail{ display: flex; } }
.rail--expanded{ width: var(--rail-w-expanded); }

.rail__brand{
  display: inline-flex; align-items: center; gap: 10px;
  padding: 10px; border-radius: var(--radius);
  color: inherit; text-decoration: none;
  border: 1px solid var(--bd-subtle);
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--brand-color) 10%, transparent), transparent),
    var(--bg-elev);
  min-height: 56px; flex-shrink: 0;
}
.rail__logo{
  width: var(--logo-size); height: var(--logo-size);
  display: grid; place-items: center;
  border-radius: 12px;
  background: linear-gradient(135deg, color-mix(in oklab, var(--brand-color) 75%, #73c0ff), var(--brand-color));
  color: #fff;
  font-weight: 800; font-size: 14px; letter-spacing:.3px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.15), 0 6px 14px rgba(13,110,253,.35);
}

.rail__title{
  font-weight: 700; white-space: nowrap; opacity: 0; transform: translateX(-4px);
  transition: opacity .18s ease, transform .18s ease;
}
.rail--expanded .rail__title{ opacity: 1; transform: translateX(0); }

.rail__actions{ display: grid; grid-template-columns: 1fr 1fr; gap: var(--gap); }
.rail__btn{
  width: 100%;
  display: inline-grid; grid-auto-flow: column;
  align-items: center; justify-content: center;
  gap: 8px; border-radius: 12px; line-height: 1;
  padding: var(--pad); border: 1px solid var(--bd-subtle);
  background: var(--bg-elev);
}
.rail__btn:hover{ background: color-mix(in oklab, var(--brand-color) 8%, var(--bg-elev)); }
.rail__btn:focus-visible{ box-shadow: var(--ring); }
.rail__btn i{
  width: var(--icon-size); height: var(--icon-size);
  font-size: var(--icon-size);
  display: grid; place-items: center;
  transform: translateY(var(--icon-nudge-y));
}

.rail__nav{ 
  display: flex; 
  flex-direction: column; 
  gap: 6px; 
  margin-top: 4px; 
}
.nav-item{
  position: relative; 
  display: flex; 
  align-items: center; 
  gap: 12px;
  padding: 10px 12px; 
  border-radius: 12px; 
  color: var(--txt); 
  text-decoration: none;
  border: 1px solid transparent;
  transition: background .12s ease, border-color .12s ease, transform .08s ease;
  outline: none;
}
.nav-item:hover{ 
  background: var(--hover); 
  border-color: var(--bd-subtle); 
  transform: translateY(-1px); 
}
.nav-item:active{ 
  transform: translateY(0); 
}
.nav-item__icon{ 
  width: 24px; 
  text-align: center; 
  font-size: 18px; 
  line-height: 1; 
  transform: translateY(var(--icon-nudge-y)); 
}
.nav-item__label{ 
  white-space: nowrap; 
  opacity: 0; 
  transform: translateX(-4px); 
  transition: opacity .18s ease, transform .18s ease; 
}
.rail--expanded .nav-item__label{ 
  opacity: 1; 
  transform: translateX(0); 
}

.nav-item[aria-current="page"]{
  color: var(--brand);
  background: color-mix(in oklab, var(--brand) 12%, transparent);
  border-color: color-mix(in oklab, var(--brand) 28%, transparent);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--brand) 30%, transparent);
}
.nav-item[aria-current="page"]::before{
  content: ""; 
  position: absolute; 
  inset-block: 8px 8px; 
  inset-inline-start: 8px;
  width: var(--indicator-w); 
  border-radius: 3px; background: var(--brand);
}

/* Section divider */
.rail__section{ 
  margin-top: 10px; 
  padding-top: 10px; 
  border-top: 1px dashed var(--bd-subtle); 
}

/* Content offset */
@media (min-width: 992px){
  .content-offset{ 
    margin-inline-start: var(--rail-w); 
    transition: margin-inline-start .22s ease; }
  .content-offset--expanded{ 
    margin-inline-start: var(--rail-w-expanded); }
}

/* Collapsed state polish */
.rail:not(.rail--expanded) .rail__brand{ 
  padding: 6px; 
  padding-left: 4px; 
  border-radius: 16px; 
}
.rail:not(.rail--expanded) .rail__title{ 
  display: none; 
}
.rail:not(.rail--expanded) .rail__btn{
  padding: 0; 
  height: var(--btn-square); 
  width: var(--btn-square); 
  border-radius: 12px;
}
.rail:not(.rail--expanded) .rail__btn span{ display: none !important; 
}
/* Default: tampil normal */
#btnTheme {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  transition:
    opacity 0.28s ease-out,
    transform 0.28s ease-out,
    visibility 0s linear;
}

/* Saat sidebar tertutup */
.rail:not(.rail--expanded) #btnTheme {
  opacity: 0;
  visibility: hidden;
  transform: translateY(-6px); /* naik sedikit */
  transition:
}

.rail:not(.rail--expanded) #btnExpand { 
  margin-left: 6px; 
}

.rail:not(.rail--expanded) .nav-item{
  padding: 8px; min-height: var(--btn-square); justify-content: center;
  border-radius: 14px; background: transparent; border-color: transparent;
}

.rail:not(.rail--expanded) .nav-item__label{ 
  display: none !important; 
}

/* =========================================
   SURFACES / LAYOUT / COMPONENTS
   ========================================= */
.container{ max-width: 1160px; }
.container.container-lg, .container.container-xl, .container.container-xxl { max-width: 1200px; } /* opsional */

.card{
  border: 1px solid var(--bd-subtle);
  border-radius: var(--radius);
  background: var(--bg-surface);
  box-shadow: var(--shadow-card);
  backdrop-filter: saturate(125%) blur(6px);
}

/* Hero */
.hero{
  border: 1px solid var(--bd-subtle);
  border-radius: 20px;
  padding: 18px 18px;
  box-shadow: 0 16px 40px rgba(13,16,23,.12);
  background: var(--bg-surface);
  backdrop-filter: saturate(125%) blur(8px);
  position: relative;
}
.hero__bg{ position: absolute; inset: 0; border-radius: inherit; background: var(--grad); opacity: .75; pointer-events: none; }
.hero .metric{
  display: flex; align-items: center; gap: 10px; padding: 10px 12px;
  border-radius: 12px; background: var(--bg-elev); border: 1px solid var(--bd-subtle);
}
.hero .metric .value{ font-weight: 700; }

/* Tool card / sticky side */
.toolcard{
  border: 1px solid var(--bd-subtle);
  border-radius: 18px;
  background: var(--bg-surface);
  box-shadow: var(--shadow-card);
  padding: 14px;
  position: sticky; top: 18px;
  backdrop-filter: saturate(120%) blur(6px);
}
.toolcard .form-select, .toolcard .btn, .toolcard .form-control{ border-radius: 12px; }
.tool-actions .btn{ min-width: 110px; }

/* Table wrapper */
.card-table{
  border: 1px solid var(--bd-subtle); border-radius: 18px; background: var(--bg-surface);
  box-shadow: var(--shadow-card); padding: 12px; overflow: hidden;
}
.table thead th{
  position: sticky; top: 0; z-index: 1; background: var(--bg-elev);
  border-bottom: 1px solid var(--bd-subtle);
}
.table-hover tbody tr:hover{ background-color: color-mix(in oklab, var(--brand) 8%, transparent); }
.table-sm td, .table-sm th{ padding: .5rem .6rem; }

/* Charts */
.chart-card{ padding:1rem; }
.chart-wrap{ position: relative; height: 320px; border-radius: 14px; overflow: hidden; }
.chart-wrap canvas{
  background: var(--chart-bg);
  border: 1px solid var(--bd-subtle);
  border-radius: 14px;
}

/* Badges status (set 1) */
.badge-status{ font-weight: 600; letter-spacing: .2px; }
.status-excellent{ background:#22c55e20; color:#22c55e; border:1px solid #22c55e55; }
.status-good{      background:#3b82f620; color:#3b82f6; border:1px solid #3b82f655; }
.status-fair{      background:#f59e0b20; color:#f59e0b; border:1px solid #f59e0b55; }
.status-poor{      background:#ef444420; color:#ef4444; border:1px solid #ef444455; }

/* Controls / utilities */
.toolbar .form-select, .toolbar .btn{ border-radius: 12px; }
.section-title{ letter-spacing: .2px; }
.muted, .lead-muted{ color: var(--txt-muted); }

.kbd{
  border: 1px solid var(--bd-subtle); background: var(--bg-elev);
  padding: .15rem .45rem; border-radius: .5rem; font-variant-numeric: tabular-nums;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  display: inline-block; color: var(--txt);
}
.kbd sub{ line-height: 0; }

.icon-pill{
  display: inline-flex; align-items: center; gap: .5rem;
  padding: .35rem .6rem; border-radius: 999px; border: 1px solid var(--bd-subtle);
  background: var(--bg-elev); font-weight: 600;
}
.mf-chip{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: .9rem;
}

/* Density / toggles */
.density .form-check{
  padding: .35rem .75rem; border-radius: 999px; border: 1px solid var(--bd-subtle); background: var(--bg-elev);
}
.density input{ cursor: pointer; }

/* Toasts */
.toast-container{ z-index: 2000; }

/* =========================================
   DARK THEME POLISH (Overrides)
   ========================================= */
[data-bs-theme="dark"] body{
  color: var(--txt);
  background:
    radial-gradient(1200px 600px at -10% -10%, rgba(13,110,253,.16), transparent 60%),
    radial-gradient(1000px 500px at 110% -20%, rgba(32,201,151,.14), transparent 60%),
    var(--bg-app);
}

/* Sidebar focus ring & hover */
[data-bs-theme="dark"] .rail{ box-shadow: var(--shadow-rail); }
[data-bs-theme="dark"] .rail__brand{
  background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 100%), var(--bg-elev);
  border-color: var(--bd-subtle);
}
[data-bs-theme="dark"] .rail__btn:hover{
  background: color-mix(in oklab, var(--brand) 14%, var(--bg-elev));
  border-color: color-mix(in oklab, var(--brand) 30%, transparent);
}
[data-bs-theme="dark"] .nav-item{ border-color: transparent; }
[data-bs-theme="dark"] .nav-item:hover{
  background: color-mix(in oklab, var(--brand) 14%, transparent);
  border-color: var(--bd-subtle);
}
[data-bs-theme="dark"] .nav-item[aria-current="page"]{
  color: color-mix(in oklab, var(--brand) 70%, #ffffff);
  background: color-mix(in oklab, var(--brand) 18%, transparent);
  border-color: color-mix(in oklab, var(--brand) 30%, transparent);
}
[data-bs-theme="dark"] .nav-item[aria-current="page"]::before{
  background: color-mix(in oklab, var(--brand) 70%, #ffffff);
}
[data-bs-theme="dark"] .rail:not(.rail--expanded) .nav-item:hover{
  background: color-mix(in oklab, var(--brand) 22%, transparent);
}

/* Cards / surfaces */
[data-bs-theme="dark"] .card,
[data-bs-theme="dark"] .toolcard,
[data-bs-theme="dark"] .card-table{
  background: var(--bg-elev);
  box-shadow: var(--shadow-card);
  border-color: var(--bd-subtle);
}

/* Typography utilities */
[data-bs-theme="dark"] .muted,
[data-bs-theme="dark"] .lead-muted,
[data-bs-theme="dark"] .text-secondary{
  color: var(--txt-muted) !important;
}

/* Forms */
[data-bs-theme="dark"] .form-control,
[data-bs-theme="dark"] .form-select{
  background: #1b2432;
  border-color: var(--bd-subtle);
  color: var(--txt);
}
[data-bs-theme="dark"] .input-group-text{
  background: #1b2432;
  border-color: var(--bd-subtle);
  color: var(--txt-muted);
}
[data-bs-theme="dark"] .form-control:focus,
[data-bs-theme="dark"] .form-select:focus{
  border-color: color-mix(in oklab, var(--brand) 45%, #ffffff);
  box-shadow: var(--ring);
}

/* Lists / table */
[data-bs-theme="dark"] .list-group-item{
  background: var(--bg-elev);
  color: var(--txt);
  border-color: var(--bd-subtle);
}
[data-bs-theme="dark"] .table{
  --bs-table-bg: transparent;
  --bs-table-color: var(--txt);
  --bs-table-border-color: var(--bd-subtle);
}
[data-bs-theme="dark"] .table-light th,
[data-bs-theme="dark"] .table-light td{
  background: color-mix(in oklab, #1b2432 84%, black) !important;
  color: var(--txt);
}

/* Buttons */
.btn-soft{ border:1px solid var(--bd-subtle); background: var(--bg-elev); }
.btn-soft:hover{ background: color-mix(in oklab, var(--brand) 8%, var(--bg-elev)); }
[data-bs-theme="dark"] .btn-outline-primary{
  color: color-mix(in oklab, var(--brand) 70%, #ffffff);
  border-color: color-mix(in oklab, var(--brand) 45%, #ffffff);
}
[data-bs-theme="dark"] .btn-outline-primary:hover{
  background: color-mix(in oklab, var(--brand) 18%, transparent);
  border-color: color-mix(in oklab, var(--brand) 60%, #ffffff);
  color: var(--txt);
}
[data-bs-theme="dark"] .btn-outline-secondary{
  color: var(--txt-muted); border-color: var(--bd-subtle);
}
[data-bs-theme="dark"] .btn-outline-secondary:hover{
  background: color-mix(in oklab, #1b2432 70%, transparent);
  color: var(--txt);
}

/* Focus ring (global targets) */
[data-bs-theme="dark"] .nav-item:focus-visible,
[data-bs-theme="dark"] .rail__btn:focus-visible,
[data-bs-theme="dark"] .rail__brand:focus-visible{
  box-shadow: var(--ring);
}

/* Tooltip */
[data-bs-theme="dark"] .tooltip-inner{
  background: #1b2432;
  color: var(--txt);
  border: 1px solid var(--bd-subtle);
}
[data-bs-theme="dark"] .tooltip-arrow::before{
  border-top-color: #1b2432 !important;
}

/* =========================================
   EXTRAS (Surface-lite, summary, soft variants, run indicator)
   ========================================= */
.surface-lite{
  background: var(--bg-surface);
  border: 1px solid var(--bd-subtle);
  border-radius: var(--radius);
  backdrop-filter: saturate(125%) blur(6px);
  box-shadow: var(--shadow-card);
}
.summary-card{
  display:flex; align-items:center; gap:1rem;
  padding:.9rem 1rem; border:1px solid var(--bd-subtle);
  border-radius: var(--radius); background: var(--bg-surface);
  backdrop-filter: saturate(125%) blur(6px);
}
.summary-icon{
  width:42px; height:42px; border-radius:12px; display:grid; place-items:center; color:#fff;
  box-shadow: 0 8px 22px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.15);
}
.summary-value{ font-size:1.35rem; font-weight:800; line-height:1; letter-spacing:.2px; }
.summary-label{ color: var(--txt-muted); font-size:.9rem; }

/* Soft button variants */
.btn-soft-primary{
  background: var(--soft-primary);
  border-color: color-mix(in oklab, var(--brand-color) 35%, transparent);
}
.btn-soft-primary:hover{ background: color-mix(in oklab, var(--brand-color) 26%, transparent); }
.btn-soft-danger{
  background: var(--soft-danger);
  border-color: color-mix(in oklab, #dc3545 35%, transparent);
}
.btn-soft-danger:hover{ background: color-mix(in oklab, #dc3545 26%, transparent); }
.btn-soft-secondary{
  background: var(--soft-secondary);
  border-color: color-mix(in oklab, #6c757d 35%, transparent);
}
.btn-soft-secondary:hover{ background: color-mix(in oklab, #6c757d 26%, transparent); }

/* Run indicator + pulsing dot */
.run-indicator{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.35rem .65rem; border-radius:999px; border:1px solid var(--bd-subtle);
  background: var(--bg-surface); color: var(--txt); font-weight:700; font-size:.85rem;
  box-shadow: var(--shadow-card);
}
.dot{ width:.6rem; height:.6rem; border-radius:50%; display:inline-block; }
.dot.green{ background:#2ecc71; box-shadow:0 0 0 0 rgba(46,204,113,.4); animation: pulse 2s infinite; }
.dot.red{ background:#e74c3c; box-shadow:0 0 0 0 rgba(231,76,60,.35); }
@keyframes pulse{
  0%{ box-shadow:0 0 0 0 rgba(46,204,113,.4); }
  70%{ box-shadow:0 0 0 10px rgba(46,204,113,0); }
  100%{ box-shadow:0 0 0 0 rgba(46,204,113,0); }
}

/* Badges status (set 2 – opsional, jika ingin tone lain) */
.badge-status{ font-weight:700; padding:.35rem .6rem; border-radius:999px; }
.status-good{ background: rgba(25,135,84,.15); color:#1b9e69; border:1px solid rgba(25,135,84,.3); }
.status-fair{ background: rgba(255,193,7,.15); color:#b58100; border:1px solid rgba(255,193,7,.35); }
.status-poor{ background: rgba(220,53,69,.15); color:#c43d4c; border:1px solid rgba(220,53,69,.35); }
[data-bs-theme="dark"] .status-good{ background: rgba(25,135,84,.2); color:#6ef0b7; border-color: rgba(25,135,84,.45); }
[data-bs-theme="dark"] .status-fair{ background: rgba(255,193,7,.2); color:#ffe08a; border-color: rgba(255,193,7,.45); }
[data-bs-theme="dark"] .status-poor{ background: rgba(220,53,69,.22); color:#ffa0ad; border-color: rgba(220,53,69,.45); }

/* Headline tweak */
.page-title{ letter-spacing:.2px; }

/* =============================
   MOBILE OFF-CANVAS (≤ 991.98px)
   ============================= */
@media (max-width: 991.98px){
  /* Rail tampil di mobile sebagai drawer */
  .rail{
    display: flex;
    width: min(86vw, 320px);
    inset: 0 auto 0 0;
    transform: translateX(-102%);
    transition:
      transform var(--t-slow) var(--ease-smooth),
      background var(--t-base) linear,
      box-shadow var(--t-base) linear,
      border-color var(--t-base) linear;
  }
  .rail.rail--expanded{ transform: translateX(0); }

  /* Konten tidak perlu offset di mobile */
  .content-offset,
  .content-offset--expanded{ margin-inline-start: 0 !important; }

  /* Overlay di belakang drawer */
  .rail-overlay{
    position: fixed; inset: 0;
    background: rgba(15, 18, 27, .38);
    opacity: 0; visibility: hidden;
    transition:
      opacity var(--t-base) var(--ease-smooth),
      visibility 0s linear var(--t-base);
    z-index: 1029;
  }
  .rail-overlay.is-visible{
    opacity: 1; visibility: visible;
    transition-delay: 0s, 0s;
  }

  /* Kunci scroll body saat drawer terbuka */
  body.no-scroll{ overflow: hidden; }

  /* Burger ikut geser saat drawer terbuka (samakan durasi & easing) */
  body.drawer-open .burger-fab{
    transform: translateY(-50%) translateX(320px); /* sesuaikan dgn lebar rail */
    transition:
      transform var(--t-slow) var(--ease-smooth),
      background-color var(--t-base) linear,
      box-shadow var(--t-base) linear;
  }
}

/* (Opsional) haptics halus saat buka/tutup di perangkat mendukung */
@media (hover: none){
  .rail.rail--expanded{ touch-action: pan-y; }
}

/* ===== Floating Burger FAB (mobile) ===== */
.burger-fab {
  position: fixed;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  z-index: 1032;

  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: 25px; height: 90px;
  padding-left: 1px;

  border: none;
  border-radius: 0 20% 20% 0;

  background: var(--bg-elev);
  opacity: 0.8;
  box-shadow: var(--shadow-card);
  backdrop-filter: saturate(125%) blur(6px);
  color: var(--txt);

  /* 🌈 tambahkan transisi super smooth */
  transition:
    transform var(--t-slow) var(--ease-smooth),
    background-color var(--t-base) linear,
    box-shadow var(--t-base) linear,
    opacity var(--t-base) linear;
}

.burger-fab:hover{
  transform: translateY(-50%) translateX(2px);
  transition: transform var(--t-base) var(--ease-smooth);
}

/* 🌿 Saat sidebar terbuka (geser ke kanan halus) */
@media (max-width: 991.98px) {
  body.drawer-open .burger-fab {
    transform: translateY(-50%) translateX(320px);
    transition:
      transform 0.6s cubic-bezier(0.25, 1, 0.3, 1), /* super smooth */
      background-color 0.35s ease,
      box-shadow 0.35s ease;
  }
}

